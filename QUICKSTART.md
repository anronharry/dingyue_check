# 智能订阅检测机器人 - 快速开始

## 🚀 新功能

### 1. 真实IP地理位置查询
- 自动查询节点真实IP的地理位置
- 显示国家、城市、ISP信息
- 国旗emoji显示

### 2. 智能输入识别
- 自动识别订阅链接、文件、节点文本
- 无需手动选择处理方式

### 3. 文件处理
- 上传txt文件自动解析节点
- 上传yaml文件解析Clash配置

---

## 📖 使用方法

### 方式1: 发送订阅链接
直接发送订阅链接,机器人会自动解析并显示:
- 流量信息
- 节点地理位置(真实IP查询)
- 协议分布

### 方式2: 上传文件
上传包含节点的txt或yaml文件,机器人会:
- 自动检测文件类型
- 解析节点信息
- 显示地理位置统计

### 方式3: 粘贴节点列表
直接粘贴节点链接(每行一个):
```
vmess://eyJhZGQiOiIxLjIuMy40...
ss://YWVzLTI1Ni1nY206...
trojan://password@5.6.7.8:443...
```

---

## 🔧 启动机器人

```bash
# 确保已配置.env文件
python bot_async.py
```

---

## 📊 输出示例

```
🚀 订阅及节点信息统计

配置名称: Example VPN
流量详情: 15 GB / 100 GB
使用进度: [■■□□□□□□□□] 15.0%

🌍 节点地理位置(真实IP):

🇭🇰 香港 (15个):
  • HK-01... (Hong Kong - HKT Limited)
  • HK-02... (Hong Kong - HKBN)
  ... 还有 13 个节点

🇺🇸 美国 (10个):
  • US-LA... (Los Angeles - Cloudflare)
  ... 还有 9 个节点

📍 节点总数: 25
```

---

## ⚙️ 技术特性

- **模块化设计** - 代码结构清晰,易于维护
- **智能缓存** - 减少API调用,提升性能
- **错误处理** - 优雅降级,用户友好提示
- **内存优化** - 适合小内存VPS

---

## 📁 新增文件

- `geo_service.py` - IP地理位置服务
- `node_extractor.py` - 节点IP提取器
- `input_detector.py` - 智能输入检测
- `file_handler.py` - 文件处理器

---

**现在就试试发送订阅链接或上传文件吧!** 🎉
