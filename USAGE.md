# 智能订阅检测机器人 - 使用指南

## 🎯 核心功能

### 1. 智能文件分析
上传txt文件后,机器人会:
- ✅ **自动检测订阅链接** - 如果文件包含http/https链接
- ✅ **解析流量信息** - 显示剩余流量、到期时间
- ✅ **显示节点统计** - 地理位置、协议分布
- ✅ **节点列表解析** - 如果没有订阅链接,解析节点

---

## 📄 文件格式说明

### 格式1: 包含订阅链接的txt
```
我的订阅链接:
https://example.com/api/v1/client/subscribe?token=xxx

备用链接:
https://backup.com/sub?key=yyy
```

**机器人会**:
1. 自动提取所有订阅链接
2. 逐个解析并显示流量信息
3. 显示节点地理位置(真实IP)
4. 提供交互按钮(重新检测、删除、添加标签)

---

### 格式2: 纯节点列表txt
```
vmess://eyJhZGQiOiIxLjIuMy40...
ss://YWVzLTI1Ni1nY206...
trojan://password@5.6.7.8:443...
```

**机器人会**:
1. 解析所有节点
2. 显示节点地理位置统计
3. 显示协议分布
4. ⚠️ **无法显示流量** (节点列表不包含流量信息)

---

## 💡 使用建议

### 如何获取流量信息?

**方法1: 发送订阅链接**
```
直接发送: https://your-sub-url.com/api/subscribe?token=xxx
```

**方法2: 上传包含订阅链接的txt**
```
在txt文件中添加订阅链接,机器人会自动识别
```

### 为什么节点列表无法显示流量?

流量信息存储在**订阅服务器的响应头**中,只有访问订阅链接才能获取。单纯的节点列表(vmess://等)不包含流量数据。

---

## 📊 输出示例

### 场景1: 上传包含订阅链接的txt

```
🔗 发现 2 个订阅链接,正在解析...
这可能需要一些时间,请稍候...

---

📊 订阅 1

🚀 订阅及节点信息统计

配置名称: Example VPN
流量详情: 15 GB / 100 GB
使用进度: [■■□□□□□□□□] 15.0%
剩余可用: 85 GB
过期时间: 2026-03-17 12:00:00

🌍 节点地理位置(真实IP):
🇭🇰 香港 (15个):
  • HK-01... (Hong Kong - HKT Limited)
  ...

[🔄 重新检测] [🗑️ 删除]
[🏷️ 添加标签]

---

✅ 文件分析完成

总订阅数: 2
成功解析: 2
解析失败: 0
```

---

### 场景2: 上传纯节点列表txt

```
📝 节点列表分析

配置名称: nodes.txt (节点列表)

🌍 节点地理位置(真实IP):
🇸🇬 新加坡 (12个):
  • Node-01... (Singapore - DigitalOcean)
  ...

📍 节点总数: 12

💡 提示: 节点列表无法显示流量信息,如需查看流量请发送订阅链接
```

---

## 🚀 快速开始

1. **准备txt文件** - 包含订阅链接或节点列表
2. **上传到机器人** - 直接拖拽或发送文件
3. **等待解析** - 机器人会自动识别并处理
4. **查看结果** - 流量信息、节点统计一目了然

---

## ⚙️ 技术特性

- **智能识别** - 自动区分订阅链接和节点列表
- **并发解析** - 多个订阅链接同时处理
- **错误处理** - 解析失败会显示详细错误信息
- **交互按钮** - 方便管理订阅

---

**现在就试试上传包含订阅链接的txt文件吧!** 🎉
